CREATE TABLE USERS (
  dni CHAR(9) NOT NULL,
  name CHAR(25) NOT NULL,
  surname1 CHAR(25) NOT NULL,
  surname2 CHAR(25) NOT NULL,
  phone CHAR(9) NOT NULL,
  mail CHAR(40) NOT NULL,
  pasword CHAR(25) NOT NULL,
  rol CHAR(10) NOT NULL,
  PRIMARY KEY(dni)
);

CREATE TABLE BOOKS (
  isbn CHAR(30) NOT NULL,
  facultad CHAR NOT NULL,
  location CHAR(25) NOT NULL,
  stock INTEGER UNSIGNED NOT NULL,
  PRIMARY KEY(isbn)
);

CREATE TABLE PENALTY (
  USERS_dni CHAR(9) NOT NULL,
  fec_ini CHAR(10) NOT NULL,
  fec_fin CHAR(10) NULL,
  INDEX Penalty_FKIndex1(USERS_dni),
  FOREIGN KEY(USERS_dni)
    REFERENCES USERS(dni)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

CREATE TABLE LOAN (
  USERS_dni CHAR(9) NOT NULL,
  BOOKS_isbn CHAR(30) NOT NULL,
  fec_ini CHAR(10) NOT NULL,
  fec_fin CHAR(10) NOT NULL,
  PRIMARY KEY(USERS_dni, BOOKS_isbn),
  INDEX LOAN_FKIndex1(USERS_dni),
  INDEX LOAN_FKIndex2(BOOKS_isbn),
  FOREIGN KEY(USERS_dni)
    REFERENCES USERS(dni)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(BOOKS_isbn)
    REFERENCES BOOKS(isbn)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);


